<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/app-layout/app-scroll-effects/app-scroll-effects.html">
<link rel="import" href="../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../bower_components/iron-selector/iron-selector.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/polymer/lib/elements/dom-repeat.html">
<link rel="import" href="../bower_components/polymer/lib/elements/dom-if.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/iron-list/iron-list.html">

<link rel="import" href="ajax_test.html">
<link rel="import" href="article-list.html">
<link rel="import" href="shared-styles.html">

<dom-module id="topic-page">
  <template>
    <style include="shared-styles">
      :host {
        width: 100%;
        height: 100%;
      }

      .main {
        display: inline-flex;
        max-height: calc(100% - var(--app-nav-size));
      }

      paper-icon-item {
        display: block;
      }

      .centered {
        height: calc(100% - 2rem);
        padding: 1rem;
        background: white;
      }

      .topic-main-space {
        width: calc(100% - 300px);
        padding: 0;
      }

      .topic-side-space {
        width: 300px;
      }

    </style>

    <polynews-nav with-sidebar></polynews-nav>

    <div class="main">
      <div class="topic-main-space">
        <div class="centered sm-shadow">
          <!-- If no summary so far display message -->
          <!-- <template is="dom-if" if="True">
            <h1>Be the first!</h1>
            <p>Do you have a point to make on this topic?</p>
          </template> -->
          <iron-pages
              selected="[[page]]"
              attr-for-selected="name"
              role="main">
            <topic-summary name="topic-summary"></topic-summary>
            <!-- <topic-article-view name="topic-article-view"></topic-article-view> -->
          </iron-pages>
        </div>
      </div>

      <div class="topic-side-space">
        <article-list articles="{{articles}}"></article-list>
      </div>
    </div>

  </template>

  <script type="text/javascript">
    class TopicPage extends Polymer.Element {
      static get is() { return 'topic-page'; }

      static get properties() {
        return {
          topic: Object,

          articles: {
            type: Array,
            value() {
              return [{
                        headline: "Trump urged to retain Paris climate deal by UN chief",
                        description: "The UN chief joins leaders of the EU and China in stressing the importance of the Paris agreement.",
                        url: "http://www.bbc.co.uk/news/world-asia-40118690",
                        source: "http://127.0.0.1:8000/sources/bbc-news/",
                        topics: [
                            "http://127.0.0.1:8000/topics/1/"
                        ]
                    },
                    {
                        headline: "Jeremy Corbyn and Theresa May clash over post-Brexit Britain",
                        description: "Labour and Tory leaders say what they want for post-Brexit Britain - with a week to go to polling day.",
                        url: "http://www.bbc.co.uk/news/election-2017-40112003",
                        source: "http://127.0.0.1:8000/sources/bbc-news/",
                        topics: [
                            "http://127.0.0.1:8000/topics/2/"
                        ]
                    },{
                        headline: "Trump urged to retain Paris climate deal by UN chief",
                        description: "The UN chief joins leaders of the EU and China in stressing the importance of the Paris agreement.",
                        url: "http://www.bbc.co.uk/news/world-asia-40118690",
                        source: "http://127.0.0.1:8000/sources/bbc-news/",
                        topics: [
                            "http://127.0.0.1:8000/topics/1/"
                        ]
                    },
                    {
                        headline: "Jeremy Corbyn and Theresa May clash over post-Brexit Britain",
                        description: "Labour and Tory leaders say what they want for post-Brexit Britain - with a week to go to polling day.",
                        url: "http://www.bbc.co.uk/news/election-2017-40112003",
                        source: "http://127.0.0.1:8000/sources/bbc-news/",
                        topics: [
                            "http://127.0.0.1:8000/topics/2/"
                        ]
                    },{
                        headline: "Trump urged to retain Paris climate deal by UN chief",
                        description: "The UN chief joins leaders of the EU and China in stressing the importance of the Paris agreement.",
                        url: "http://www.bbc.co.uk/news/world-asia-40118690",
                        source: "http://127.0.0.1:8000/sources/bbc-news/",
                        topics: [
                            "http://127.0.0.1:8000/topics/1/"
                        ]
                    },
                    {
                        headline: "Jeremy Corbyn and Theresa May clash over post-Brexit Britain",
                        description: "Labour and Tory leaders say what they want for post-Brexit Britain - with a week to go to polling day.",
                        url: "http://www.bbc.co.uk/news/election-2017-40112003",
                        source: "http://127.0.0.1:8000/sources/bbc-news/",
                        topics: [
                            "http://127.0.0.1:8000/topics/2/"
                        ]
                    },
                    {
                        headline: "Manchester attack: Saffie Roussos mum 'told of her death'",
                        description: "The mother and sister of Manchester attack victim Saffie Roussos are now said to be \"out of danger\".",
                        url: "http://www.bbc.co.uk/news/uk-england-manchester-40118243",
                        source: "http://127.0.0.1:8000/sources/bbc-news/",
                        topics: [
                            "http://127.0.0.1:8000/topics/3/"
                        ]
                    }];
            }
          }
        }
      }
    }

    window.customElements.define(TopicPage.is, TopicPage);
  </script>
</dom-module>
