<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/app-layout/app-grid/app-grid-style.html">
<link rel="import" href="../bower_components/polymer/lib/elements/dom-repeat.html">
<link rel="import" href="../bower_components/polymer/lib/elements/dom-if.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/iron-image/iron-image.html">

<link rel="import" href="shared-styles.html">

<dom-module id="topic-index">
  <template>
    <style include="app-grid-style shared-styles">
      :host {
        display: block;
        --app-grid-columns: 3;
        --app-grid-gutter: 1rem;
        --app-grid-expandible-item-columns: 2;
        --paper-icon-button-ink-color: white;
      }

      ul {
        padding: 0;
        list-style: none;
      }

      .item {
        height: 250px;
        position: relative;
        box-shadow: none;
        /*background-color: white;
        background-size: cover;
        background-position: center center;*/
      }

      .item-bg {
        background-color: var(--app-main-color);
        width: 100%; height: 100%;
        position: relative;
        z-index: 4;
        -webkit-filter: grayscale(50%);
      }

      .item, .item-bg {
        -webkit-transition: all 0.3s ease;
           -moz-transition: all 0.3s ease;
             -o-transition: all 0.3s ease;
            -ms-transition: all 0.3s ease;
                transition: all 0.3s ease;
      }

      .item:hover {
        -webkit-box-shadow: 2px 2px 5px rgba(0,0,0,.8);
           -moz-box-shadow: 2px 2px 5px rgba(0,0,0,.8);
                box-shadow: 2px 2px 5px rgba(0,0,0,.8);
      }

      .item:hover > .item-bg {
        -webkit-filter: grayscale(0%);
      }

      .item-title {
        position: absolute;
        z-index: 6;
        bottom: 0;
        left: 0;
        right: 0;
        background-color: rgba(0, 0, 0, 0.2);
        color: white;
        font-weight: 400;
        padding: 16px;
      }

      /* Every other row should be an expendanded item */
      .item:nth-child(5n + 1) {
        @apply --app-grid-expandible-item;
      }

      .item:nth-child(5n + 1), .item:nth-child(5n + 2) {
        height: 40vmax;
      }

      @media(max-width: 799px) {

        .centered-container {
          margin: 10px 5px;
        }

        .item:nth-child(5n+2) {
          height: inherit;
        }

        :host {
          --app-grid-columns: 2;
          --app-grid-gutter: 5px;
          --app-grid-item-height: 200px;
        }

      }

      #topics {
        padding: 1rem;
      }

    </style>

    <div class="centered">
      <template is="dom-if" if="{{!topics.length}}">
        <div class="missing">
          <iron-icon class="big-icon" icon="inbox"></iron-icon>
          <h1>Bad News!</h1>
          <p>It seems that we are out of news topics. Come back later for more!</p>
        </div>
      </template>
      <ul class="app-grid" id="topics">
        <template is="dom-repeat" items="{{topics}}" as="topic">
          <li class="item">
            <iron-image class="item-bg"
                        sizing="cover"
                        src="{{topic.image}}"></iron-image>
            <div class="item-title">{{topic.title}}</div>
          </li>
        </template>
      </ul>
    </div>

  </template>

  <script type="text/javascript">
    class TopicIndex extends Polymer.Element {
      static get is() { return 'topic-index'; }

      static get properties() {
        return {
          topics: {
            type: Array,
            value() {
              return [
                {title: 'Title 1', image:'../images/test_images/big_test.jpg'},
                {title: 'Title 2', image:'../images/test_images/sml_test.jpg'},
                {title: 'Title 3', image:'../images/test_images/big_test.jpg'},
                {title: 'Title 4', image:'../images/test_images/med_test.jpg'}
              ];
            }
          }
        }
      }
    }

    window.customElements.define(TopicIndex.is, TopicIndex);
  </script>
</dom-module>
