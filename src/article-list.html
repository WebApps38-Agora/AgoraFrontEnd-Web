<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="shared-styles.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/iron-list/iron-list.html">
<link rel="import" href="../bower_components/app-layout/app-scroll-effects/app-scroll-effects.html">
<link rel="import" href="../bower_components/polymer/lib/elements/dom-if.html">
<link rel="import" href="../bower_components/iron-image/iron-image.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="shared-styles.html">
<link rel="import" href="my-icons.html">

<link rel="import" href="article-elem.html">

<dom-module id="article-list">
  <template>
    <style include="shared-styles iron-flex">
      :host {
        width: 100%;
        height: 100%;
        max-width: 100%;
        display: block;
        background: white;
      }

      iron-list {
        max-height: calc(100vh - var(--app-nav-size));
      }

      .missing {
        padding: 2rem;
      }

      #filler > .pad {
        width:  calc(100% - 4rem);
        height: calc(100% - 4rem);
        padding: 2rem;
        display: table;
      }

      .pad-cell {
        display: table-cell;
        vertical-align: middle;
      }

      #filler {
        /*height: calc( 100% - ;*/
        max-width: 100%;
        padding-top: 1rem;
        text-align: center;
        color: var(--app-dark-color);
      }

    </style>

    <template is="dom-if" if="{{!articles.length}}">
      <div class="article" style="margin:2rem;margin-top:0;margin-bottom:0;">
        <p>We don't have any headlines on this topic</p>
      </div>
    </template>

    <iron-list id="headline-list" items="[[articles]]" as="article">
      <template>
        <article-elem article="{{article}}"></article-elem>
      </template>
    </iron-list>
    <div class="article" id="filler">
      <div class="pad">
        <div class="pad-cell">
          <h3>That's it folks!</h3>
          <p>We don't seem to have any more articles on the topic</p>
        </div>
      </div>
    </div>

  </template>

  <script>
    class ArticleList extends Polymer.Element {
      static get is() { return 'article-list'; }

      static get properties() {
        return {
          articles: {
            type: Array,
            observer: '_formatList'
          },
          sources: Array
        };
      }

      _formatList() {
        if (this.articles.length < 5) {
          this.$.filler.style.height = 100 - (this.articles.length * 20) + "%" ;
        } else {
          this.$.filler.style.display = 'none';
        }
      }
    }

    window.customElements.define(ArticleList.is, ArticleList);
  </script>
</dom-module>
